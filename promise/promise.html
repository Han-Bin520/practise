<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script>
   /* let promise1 = Promise.resolve(3);
    let promise2 = 42;
    let promise3 = new Promise((resolve) => {
        setTimeout(resolve, 100, 'foo');
    });

    Promise.all([promise1, promise2, promise3])
        .then((values) => {
        console.log(values);
    });*/
/*   new Promise(
       function (resolve, reject) {
           // 一段耗时的异步操作
           resolve('成功');// 数据处理完成
           reject('失败'); // 数据处理出错
       }
   ).then(
       (res) => {console.log(res)},  // 成功
       (err) => {console.log(err)} // 失败
   );*/
/*   new Promise(resolve => {
       setTimeout(() => {
           resolve('hello');
       }, 2000)
   }).then(
       (res) => {console.log(res)},  // 成功
       (err) => {console.log(err)} // 失败
   )*/


/*
Promise.all() 批量执行
Promise.all([p1, p2, p3])用于将多个promise实例，包装成一个新的Promise实例，返回的实例就是普通的promise
它接收一个数组作为参数
数组里可以是Promise对象，也可以是别的值，只有Promise会等待状态改变
当所有的子Promise都完成，该Promise完成，返回值是全部值得数组
有任何一个失败，该Promise失败，返回值是第一个失败的子Promise结果
*/
   //切菜
   function cutUp(){
       console.log('开始切菜。');
       let p = new Promise(resolve =>{        //做一些异步操作
           setTimeout(function(){
               console.log('切菜完毕！');
               resolve('切好的菜');
           }, 1000);
       });
       return p;
   }

   //烧水
   function boil(){
       console.log('开始烧水。');
       let p = new Promise(resolve => {        //做一些异步操作
           setTimeout(function(){
               console.log('烧水完毕！');
               resolve('烧好的水');
           }, 1000);
       });
       return p;
   }

   Promise.all([cutUp(), boil()])
       .then((result) => {
           console.log('准备工作完毕');
           console.log(result);
       });
</script>
</body>
</html>